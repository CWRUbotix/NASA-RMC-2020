<?xml version="1.0"?>
<launch>
	<!-- "true" if this launch file is being run from on the robot -->
	<arg name="launch_from_robot" value="$(eval '192.168.0.100' in optenv('ROS_IP'))"/>
	
	<machine name="robot" address="192.168.0.100" user="cwrubotix" password="cwrubotix" default="never" env-loader="/home/cwrubotix/my_env_setup.sh"/>

    <rosparam command="load" file="$(find glenn_launcher)/params/autonomy/autonomy_glennobi.yaml" ns="autonomy"/>

    <group if="$(arg launch_from_robot)">
        <node name="transit_node" pkg="autonomy" type="transit_node.py" output="screen"/>
        <node name="cmd_to_wheel_speeds_node" pkg="autonomy" type="cmd_to_wheel_speeds_node.py"/>
    </group>
    <group unless="$(arg launch_from_robot)">
        <!-- Commented out for now until we figure out how to switch between launching on robot and launching on computer -->
<!--         <node machine="robot" name="transit_node" pkg="autonomy" type="transit_node.py" output="screen"/> -->
        <node name="transit_node" pkg="autonomy" type="transit_node.py" output="screen"/>
        <node name="cmd_to_wheel_speeds_node" pkg="autonomy" type="cmd_to_wheel_speeds_node.py"/>

        <node name="autonomy_node" pkg="autonomy" type="autonomy_node.py" launch-prefix="xterm -e"/>
    </group>
</launch>
